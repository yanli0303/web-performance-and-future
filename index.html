<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>Web - Performance and Future</title>

        <meta name="description" content="Web performance tuning with HTTP/1; and the future of the web - HTTP/2">
        <meta name="author" content="Yan Li">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- My Styles -->
        <link rel="stylesheet" href="css/yali.css">

        <!-- Open any link on this page in a new browser window -->
        <base target="_blank" />

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section id="welcome">
                    <section>
                        <h1>Web</h1>
                        <h2>Performance and Future</h2>
                        <p>
                            <small>Yan (Peter) Li / Aug 2015</small>
                        </p>
                    </section>
                    <section>
                        <img data-src="images/qr-online.png" alt="http://10.197.38.188/velocity" />
                        <p>View online</p>
                    </section>
                    <section>
                        <img data-src="images/qr-pdf.png" alt="http://10.197.38.188/velocity/pdf" />
                        <p>Download PDF</p>
                    </section>
                </section>

                <section id="intro">
                    <section>
                        <h2>Hello, I'm Yan</h2>
                        <img width="350" height="535" style="float:left;margin:0;background:none;box-shadow:none;border:none;" data-src="images/yan-usher-badge-tilt.png" alt="Yan Li Usher Badge"/>
                        <ul style="float:left;margin-top:150px;">
                            <li>Joined MSTR in July 2008</li>
                            <li>Working on Usher NM</li>
                            <li>Love Web</li>
                        </ul>
                    </section>

                    <section>
                        <h2>Topic</h2>
                        <ul>
                            <li class="fragment">Web Performance Tuning</li>
                            <li class="fragment">A little on Security (HTTPS)</li>
                            <li class="fragment">HTTP/2.0</li>
                        </ul>
                        <p class="fragment">Hope it helps!</p>
                    </section>

                    <section>
                        <h2>Do you like web?</h2>
                        <table class="no-border align-center">
                            <tbody>
                                <tr>
                                    <td style="width:45%"><span class="square border-round bg-blue">Frontend</span></td>
                                    <td>+</td>
                                    <td style="width:45%"><span class="square border-round bg-green">Backend</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                </section>

                <section id="latency">
                    <section>
                        <h2>Faster sites</h2>
                        <p>What rules/best practices do you know?</p>
                    </section>
                    <section>
                        <h2>YAHOO! Best Practices</h2>
                        <ol>
                            <li>Make Fewer HTTP Requests</li>
                            <li>Use a CDN</li>
                            <li>Add Expires or Cache-Control Header</li>
                            <li>Gzip Components</li>
                            <li>Put Stylesheets at Top</li>
                            <li>Put Scripts at Bottom</li>
                            <li>...</li>
                        </ol>
                        <p><a href="https://developer.yahoo.com/performance/rules.html">https://developer.yahoo.com/performance/rules.html</a></p>
                    </section>
                    <section>
                        <h2>YAHOO! Best Practices</h2>
                        <table class="no-border">
                            <tbody>
                                <tr class="progress-bar">
                                    <td class="bg-yellow">redirections</td>
                                    <td class="bg-olive">DNS</td>
                                    <td class="bg-orange">TCP</td>
                                    <td class="bg-blue">request<br/>response</td>
                                    <td class="border-round-right bg-green">rendering</td>
                                </tr>
                                <tr class="fragment">
                                    <td class="border-left">minimize<br/>redirection</td>
                                    <td class="border-left">reduce<br/>lookups</td>
                                    <td class="border-left">image<br/>spriting<br/><br/>minify</td>
                                    <td class="border-left">domain<br/>sharding<br/><br/>caching</td>
                                    <td class="border-left">css on top<br/><br/>js at bottom</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>

                    <section>
                        <h2>Minimize Redirections</h2>
                        <p>HTTP/1.1 defines several status codes for redirection:</p>
                        <ul style="margin-left:50px;">
                            <li>300 multiple choices (e.g. offer different languages)</li>
                            <li>301 moved permanently</li>
                            <li>302 found</li>
                            <li>303 see other (forces a GET)</li>
                            <li>307 temporary redirect</li>
                            <li>308 permanent redirect (RFC 7538)</li>
                        </ul>
                    </section>

                    <section>
                        <h2>DNS lookup</h2>
                        <table class="bordered align-center">
                            <thead>
                                <tr>
                                    <th style="width:40%">www.google.com</th>
                                    <th colspan="2"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODgyNzcwMw==&mid=201837080&idx=1&sn=b2a152b84df1c7dbd294ea66037cf262&scene=2&from=timeline&isappinstalled=0#rd">HttpDNS</a></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td rowspan="2">
                                        <ol>
                                            <li class="fragment highlight-blue">Intranet DNS</li>
                                            <li><em class="fragment highlight-red">ISP</em> DNS</li>
                                            <li><em class="fragment highlight-blue">Root</em> name server</li>
                                            <li><em class="fragment highlight-blue">.com</em> name server</li>
                                            <li><em class="fragment highlight-blue">google.com</em> name server</li>
                                        </ol>
                                    </td>
                                    <td>1st request</td>
                                    <td class="fragment highlight-blue">Http gets<br/>Nearest server IP</td>
                                </tr>
                                <tr>
                                    <td>Subsequent</td>
                                    <td class="fragment highlight-blue">Nearest server IP</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>

                    <section>
                        <h2>TCP 3-way handshake</h2>
                        <table class="no-border align-center">
                            <tbody>
                                <tr>
                                    <td rowspan="3" class="square border-round bg-olive">Host A</td>
                                    <td>-----SYN-----&gt;</td>
                                    <td rowspan="3" class="square border-round bg-green">Host B</td>
                                </tr>
                                <tr>
                                    <td>&lt;---SYN ACK---</td>
                                </tr>
                                <tr>
                                    <td>-----ACK-----&gt;</td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="fragment" style="margin-top:2em">
                            <small>
                                See <a href="http://www.inetdaemon.com/tutorials/internet/tcp/3-way_handshake.shtml">TCP 3-Way Handshake (SYN,SYN-ACK,ACK)</a>
                            </small>
                        </p>
                    </section>
                    <section>
                        <h2>TCP Slow Start</h2>
                        <table class="fragment no-border align-center">
                            <tbody>
                                <tr>
                                    <td style="width:40%">
                                        <small class="fragment">How fast should I send segments?</small>
                                    </td>
                                    <td></td>
                                    <td style="width:40%">
                                        <small class="fragment">Ack...ack...ack...ack...ack...</small>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="square border-round bg-blue">Client</span>
                                    </td>
                                    <td>
                                        <small>...routers...</small>
                                    </td>
                                    <td>
                                        <span class="square border-round bg-yellow">Server</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            <a class="fragment" href="http://www.cdnplanet.com/blog/tune-tcp-initcwnd-for-optimum-performance/">Tuning initcwnd for optimum performance</a><br/>
                            <a class="fragment" href="http://www.lognormal.com/blog/2012/09/27/linux-tcpip-tuning/">Linux TCP/IP tuning for scalability</a>
                        </p>
                    </section>

                    <section>
                        <h2>Domain Sharding</h2>
                        <table class="fragment no-border align-center">
                            <tbody>
                                <tr>
                                    <td style="width:30%" class="square border-round bg-blue">Browser</td>
                                    <td>
                                        <small class="fragment current-visible">simultaneous connections</small>
                                        <small class="fragment current-visible">2 simultaneous connections</small>
                                        <small class="fragment current-visible">6-8 simultaneous connections</small>
                                    </td>
                                    <td style="width:30%" class="square border-round bg-yellow">Domain</td>
                                </tr>
                            </tbody>
                        </table>
                        <p style="margin-top:2em" class="fragment">
                            <small>
                                <a href="http://www.mobify.com/blog/domain-sharding-bad-news-mobile-performance/">http://www.mobify.com/blog/domain-sharding-bad-news-mobile-performance/</a>
                            </small>
                        </p>
                    </section>
                </section>

                <section>
                    <h2>What</h2>
                </section>

                <section>
                    <h2>Data rate and latency</h2>
                    <table style="font-size:90%" class="bordered align-center">
                        <thead>
                            <tr>
                                <th colspan="2">Desktop</th>
                                <th colspan="3">Mobile</th>
                            </tr>
                            <tr>
                                <th>Data rate</th>
                                <th>Latency</th>
                                <th>Gen</th>
                                <th>Data rate</th>
                                <th>Latency</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="3">10Mbps<br/>100Mbps<br/>1Gbps</td>
                                <td rowspan="3">65-145 ms</td>
                                <td>2G</td>
                                <td>100-400Kbps</td>
                                <td>300-1000ms</td>
                            </tr>
                            <tr>
                                <td>3G</td>
                                <td>0.5-1Mbps</td>
                                <td>100-500ms</td>
                            </tr>
                            <tr>
                                <td>4G</td>
                                <td>1-50Mbps</td>
                                <td>&lt;100ms</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>
                        <small>
                            <a href="http://www.webperformancetoday.com/2012/04/02/mobile-versus-desktop-latency/">http://www.webperformancetoday.com/2012/04/02/mobile-versus-desktop-latency/</a>
                            <br/>
                            <a href="http://chimera.labs.oreilly.com/books/1230000000545/ch07.html#_brief_history_of_the_g_8217_s">http://chimera.labs.oreilly.com/books/1230000000545/ch07.html#_brief_history_of_the_g_8217_s</a>
                        </small>
                    </p>
                </section>

                <section>
                    <h2>Our web page/code base is getting bigger and bigger...</h2>
                </section>

                <section>



                    <section>
                        <h2>Those are all about</h2>
                        <table>
                            <tbody>
                                <tr>
                                    <td>
                                        <span class="square round-left"></span>
                                    </td>
                                    <td>
                                        <span class="square"></span>
                                    </td>
                                    <td>
                                        <span class="square"></span>
                                    </td>
                                    <td>
                                        <span class="square"></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </section>


                </section>

                <section>
                    <section>
                        <h2>After user typed the URL...</h2>
                        <img style="margin:0;background:none;box-shadow:none;border:none;" data-src="images/user-typed-url.png" alt="User typed the URL and hitted ENTER key"/>
                    </section>
                    <section>
                        <h2>After user typed the URL...</h2>
                        <img alt="phases of HTTP request and response"/>
                    </section>
                </section>

                <section>
                    <h2>Redirections</h2>
                    <p>HTTP/1.1 defines several status codes for redirection:</p>
                    <ul style="margin-left:50px;">
                        <li>300 multiple choices (e.g. offer different languages)</li>
                        <li>301 moved permanently</li>
                        <li>302 found</li>
                        <li>303 see other (forces a GET)</li>
                        <li>307 temporary redirect</li>
                        <li>308 permanent redirect (RFC 7538)</li>
                    </ul>
                </section>

                <section>
                    <h2>Resources</h2>
                    <ul>
                        <li><a href="https://w3c.github.io/resource-hints/">Resource Hints</a></li>
                        <li><a href="https://wdrl.info/">Web Development Reading List</a></li>
                    </ul>
                </section>

                <section>
                    <h2>References</h2>
                    <ol>
                        <li><a href="http://velocity.oreilly.com.cn/2015/index.php?func=slidesvideos">The Quest to Delight Our Users</a> by <a href="https://www.linkedin.com/in/alvacheung">Alva Cheung(Google)</a></li>
                        <li><a href="http://velocity.oreilly.com.cn/2015/index.php?func=slidesvideos">eBay对页面性能的监控和调优</a> by <a href="mailto:weishi@ebay.com">施尉霁(eBay)</a></li>
                        <li><a href="http://velocity.oreilly.com.cn/2015/index.php?func=slidesvideos"></a></li>
                        <li><a href="http://velocity.oreilly.com.cn/2015/index.php?func=slidesvideos"></a></li>
                        <li><a href="http://velocity.oreilly.com.cn/2015/index.php?func=slidesvideos"></a></li>
                        <li><a href="http://velocity.oreilly.com.cn/2015/index.php?func=slidesvideos"></a></li>
                    </ol>
                </section>

                <section>
                    <h1>Thanks!</h1>
                </section>

                <section>
                    <section id="fragments">
                        <h2>Fragments</h2>
                        <p>Hit the next arrow...</p>
                        <p class="fragment">... to step through ...</p>
                        <p><span class="fragment">... a</span> <span class="fragment">fragmented</span> <span class="fragment">slide.</span></p>

                        <aside class="notes">
                            This slide has fragments which are also stepped through in the notes window.
                        </aside>
                    </section>
                    <section>
                        <h2>Fragment Styles</h2>
                        <p>There's different types of fragments, like:</p>
                        <p class="fragment grow">grow</p>
                        <p class="fragment shrink">shrink</p>
                        <p class="fragment fade-out">fade-out</p>
                        <p class="fragment current-visible">current-visible</p>
                        <p class="fragment highlight-red">highlight-red</p>
                        <p class="fragment highlight-blue">highlight-blue</p>
                    </section>
                </section>

                <section>
                    <h2>Clever Quotes</h2>
                    <p>
                        These guys come in two forms, inline: <q cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
                        &ldquo;The nice thing about standards is that there are so many to choose from&rdquo;</q> and block:
                    </p>
                    <blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
                        &ldquo;For years there has been a theory that millions of monkeys typing at random on millions of typewriters would
                        reproduce the entire works of Shakespeare. The Internet has proven this theory to be untrue.&rdquo;
                    </blockquote>
                </section>
            </div>
        </div>
        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>
        <script>
            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'convex', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });
        </script>
    </body>
</html>
